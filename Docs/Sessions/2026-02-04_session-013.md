# Session 2026-02-04 - session-013 (Teacher Attendance List)

## Goals
- Display attendance list for a session
- Compute present/absent

## Context
- PRD: teacher sees 'Liste des presences' and present/absent

## Atomic Tasks
1) Build attendance list screen -- DONE:
   - AttendanceListPage: classId + sessionId params
   - Fetches roster from classes/{classId}/members (role=student)
   - Fetches user profiles from users/{uid} for names
   - Streams records from classes/{classId}/attendanceSessions/{sessionId}/records
2) Compute present/absent and show summary -- DONE:
   - Summary bar: "Pr\u00e9sents" count with check icon (green), "Absents" count with X icon (red)
   - Present section: student cards with name + personalNumber + check-in time (HH:MM)
   - Absent section: student cards with name + personalNumber
   - Both sections sorted alphabetically by fullName
3) Add providers for attendance list -- DONE:
   - fetchClassStudents(classId): fetches student UIDs from members, then user profiles
   - attendanceRecordsStream(classId, sessionId): streams record UIDs with checkedAt timestamps
4) Add navigation from QR display -- DONE:
   - "Voir la liste" button on QrDisplayPage navigates to AttendanceListPage
5) Confirm student access -- NOTE:
   - Per Firestore rules, students CAN read attendance records (memberOfClass check)
   - UI is accessible but students typically won't navigate there (no entry point in student UI)

## Tests
- flutter analyze: 0 issues
- flutter test: 1 test passed

## Errors
- None

## Outputs
Files created:
- lib/features/attendance/attendance_list_page.dart (AttendanceListPage, _SummaryBadge, _SectionHeader, _StudentTile)

Files modified:
- lib/features/attendance/attendance_providers.dart (added fetchClassStudents, attendanceRecordsStream)
- lib/features/attendance/qr_display_page.dart (added "Voir la liste" button)

## Next Steps
- Session-014: Settings (photo/email/logout) + Storage rules
